<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exam Seat Reservation System</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0; padding: 0;
      background: #f5f7fa;
      color: #333;
    }
    header {
      background: #004aad;
      color: #fff;
      text-align: center;
      padding: 1rem;
      position: sticky; top: 0;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 2rem;
      transition: 0.3s ease;
    }
    .hidden { display: none; }
    button {
      background: #004aad;
      color: #fff;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #00337a;
    }
    select, input {
      width: 100%;
      padding: 0.6rem;
      margin: 0.5rem 0 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .lang-switch {
      position: absolute; top: 15px; right: 15px;
      background: #fff; color: #004aad;
      border: 1px solid #004aad;
      font-size: 0.9rem;
    }
    h2 { color: #004aad; }
    .fade-in { animation: fadeIn 0.5s ease; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    footer {
      text-align: center;
      padding: 1rem;
      color: #777;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="title">Exam Seat Reservation</h1>
    <button id="langBtn" class="lang-switch">العربية</button>
  </header>

  <main>
    <div class="container fade-in" id="homePage">
      <h2 id="welcomeTitle">Welcome</h2>
      <p id="welcomeMsg">Please start your seat reservation process.</p>
      <button onclick="nextPage('coursePage')">Start</button>
    </div>

    <div class="container hidden fade-in" id="coursePage">
      <h2 id="courseTitle">Select Course</h2>
      <select id="courseSelect">
        <option value="">-- Choose Course --</option>
        <option>PHYS101</option>
        <option>PHYS102</option>
        <option>PHYS201</option>
      </select>
      <button onclick="nextPage('labPage')">Next</button>
    </div>

    <div class="container hidden fade-in" id="labPage">
      <h2 id="labTitle">Select Lab</h2>
      <select id="labSelect">
        <option value="">-- Choose Lab --</option>
        <option>Lab A</option>
        <option>Lab B</option>
        <option>Lab C</option>
      </select>
      <button onclick="nextPage('periodPage')">Next</button>
    </div>

    <div class="container hidden fade-in" id="periodPage">
      <h2 id="periodTitle">Select Period</h2>
      <select id="periodSelect">
        <option value="">-- Choose Period --</option>
        <option>Morning</option>
        <option>Afternoon</option>
        <option>Evening</option>
      </select>
      <button onclick="nextPage('reservePage')">Next</button>
    </div>

    <div class="container hidden fade-in" id="reservePage">
      <h2 id="reserveTitle">Seat Reservation</h2>
      <label id="nameLabel" for="name">Name</label>
      <input type="text" id="name" placeholder="Enter your name" />
      <label id="idLabel" for="studentId">Student ID</label>
      <input type="text" id="studentId" placeholder="Enter your ID" />
      <button onclick="submitReservation()">Submit</button>
    </div>

    <div class="container hidden fade-in" id="confirmPage">
      <h2 id="confirmTitle">Reservation Confirmed ✅</h2>
      <p id="confirmMsg">Your seat has been successfully reserved.</p>
      <button onclick="restart()">Home</button>
    </div>
  </main>

  <footer>
    &copy; 2025 Physics Department - Exam Seat System
  </footer>

  <script>
    const pages = ['homePage', 'coursePage', 'labPage', 'periodPage', 'reservePage', 'confirmPage'];
    let currentLang = 'en';

    function nextPage(pageId) {
      pages.forEach(p => document.getElementById(p).classList.add('hidden'));
      document.getElementById(pageId).classList.remove('hidden');
    }

    function restart() {
      document.getElementById('courseSelect').value = '';
      document.getElementById('labSelect').value = '';
      document.getElementById('periodSelect').value = '';
      document.getElementById('name').value = '';
      document.getElementById('studentId').value = '';
      nextPage('homePage');
    }

    async function submitReservation() {
      const data = {
        name: document.getElementById('name').value.trim(),
        studentId: document.getElementById('studentId').value.trim(),
        course: document.getElementById('courseSelect').value,
        lab: document.getElementById('labSelect').value,
        period: document.getElementById('periodSelect').value
      };

      if (!data.name || !data.studentId || !data.course || !data.lab || !data.period) {
        alert(currentLang === 'en' ? 'Please fill all fields.' : 'يرجى ملء جميع الحقول.');
        return;
      }

      try {
        // Connect this URL to your Google Apps Script endpoint
        const response = await fetch("https://script.google.com/macros/s/AKfycbwf0UwMPYQ-DtVZEZ9EH3sBZW-y1KFQU7UT5TdwUgC1MrptesUmE8F4gDMZpKlBygXFBw/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        if (response.ok) nextPage('confirmPage');
        else throw new Error('Network error');
      } catch (err) {
        alert(currentLang === 'en'
          ? 'Submission failed. Please try again.'
          : 'فشل الإرسال، يرجى المحاولة مرة أخرى.');
      }
    }

    document.getElementById('langBtn').addEventListener('click', () => {
      currentLang = currentLang === 'en' ? 'ar' : 'en';
      document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
      updateLanguage();
    });

    function updateLanguage() {
      const t = {
        en: {
          title: "Exam Seat Reservation",
          welcomeTitle: "Welcome",
          welcomeMsg: "Please start your seat reservation process.",
          courseTitle: "Select Course",
          labTitle: "Select Lab",
          periodTitle: "Select Period",
          reserveTitle: "Seat Reservation",
          nameLabel: "Name",
          idLabel: "Student ID",
          confirmTitle: "Reservation Confirmed ✅",
          confirmMsg: "Your seat has been successfully reserved.",
          langBtn: "العربية"
        },
        ar: {
          title: "نظام حجز مقعد الامتحان",
          welcomeTitle: "مرحباً",
          welcomeMsg: "الرجاء البدء في عملية حجز المقعد.",
          courseTitle: "اختر المقرر",
          labTitle: "اختر المعمل",
          periodTitle: "اختر الفترة",
          reserveTitle: "حجز المقعد",
          nameLabel: "الاسم",
          idLabel: "رقم الطالب",
          confirmTitle: "تم تأكيد الحجز ✅",
          confirmMsg: "تم حجز مقعدك بنجاح.",
          langBtn: "English"
        }
      };
      const L = t[currentLang];
      for (let id in L) {
        if (id === 'langBtn') document.getElementById(id).textContent = L[id];
        else document.getElementById(id).textContent = L[id];
      }
    }
  </script>
</body>
</html>
